<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZapsyGo</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Remix Icon & FontAwesome -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="style2.css" />

        <!-- Preloader Style -->
    <style>
      #preloader {
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
        background-color: #ffffff;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .spinner {
        width: 60px;
        height: 60px;
        border: 8px solid #eee;
        border-top: 8px solid #2560a3;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top">
      <div class="container">
        <a class="navbar-brand fw-bold" href="#">ZapsyGo</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="navbar-nav gap-2 m-auto">
            <li class="nav-item"><a class="nav-link" href="index.html">BERANDA</a></li>
            <li class="nav-item"><a class="nav-link" href="about.html">TENTANG KAMI</a></li>
            <li class="nav-item"><a class="nav-link" href="itinerary.html">ITINERARY</a></li>
            <li class="nav-item"><a class="nav-link" href="destinasi.html">DESTINASI</a></li>
          </ul>
          <ul class="navbar-nav gap-2">
            <li class="nav-item">
              <a class="btn fw-bold px-3" href="login.html" id="loginButton">MASUK</a>
            </li>
            <li class="nav-item dropdown d-none" id="profileDropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center gap-2" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-user-circle fs-4"></i> <span id="usernameDisplay">Profil</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="profile.html">Profil Saya</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item text-danger" href="#" id="logoutBtn">Logout</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Section Info -->
    <section class="py-5 p-5 mt-5">
      <div class="container">
        <div class="row align-items-center g-5">
          <div class="col-md-6">
            <div class="text-white rounded-4 p-4" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('assets/barelang.jpeg') center/cover no-repeat; height: 280px; display: flex; align-items: center">
              <blockquote class="mb-0 fs-5 fw-semibold">“Komitmen dan dedikasi kami bertujuan untuk memberikan pengalaman perjalanan yang terbaik untuk anda.”</blockquote>
            </div>
          </div>
          <div class="col-md-6">
            <h2 class="fw-bold" style="color: #2560a3">Bersama anda sejak 2025</h2>
            <p class="text-secondary">
              Zapsy Go adalah website informasi wisata yang berfokus pada pengalaman berlibur di Batam, Kepulauan Riau. Kami hadir sebagai panduan digital terpercaya bagi para wisatawan, terutama bagi mereka yang pertama kali mengunjungi Batam.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Jelajahi Section -->
    <section class="py-5" style="background-color: #2560a3">
      <div class="container">
        <div class="row align-items-center g-5">
          <div class="col-md-6 text-white">
            <h2 class="fw-bold">Jelajahi Batam bersama kami</h2>
            <p>
              Zapsy Go adalah bentuk nyata dari dedikasi kami dalam mendukung kemajuan pariwisata Batam. Kami menyediakan informasi yang tidak hanya informatif, tetapi juga dirancang untuk membantu wisatawan merencanakan perjalanan mereka dengan mudah dan menyenangkan.
            </p>
          </div>
          <div class="col-md-6 d-flex justify-content-center">
            <img src="assets/wtb.webp" alt="Welcome to Batam" class="img-fluid rounded-4 w-75" />
          </div>
        </div>
      </div>
          <div id="preloader">
      <div class="spinner"></div>
    </div>
    </section>

    <!-- Mengapa memilih ZapsyGo -->
    <section class="container py-5">
      <h2 class="text-center fw-bold mb-5" style="color: #2560a3">Mengapa memilih ZapsyGo?</h2>
      <div class="row text-center justify-content-center g-4">
        <div class="col-md-4">
          <div class="p-4 text-white rounded-4 h-100 shadow-sm" style="background-color: #2560a3">
            <i class="ri-global-line fs-1 mb-3"></i>
            <h5 class="fw-bold">TERDEPAN</h5>
            <p class="mb-0">Kami memberikan kemudahan, kenyamanan, dan keamanan dalam perjalanan anda.</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="p-4 text-white rounded-4 h-100 shadow-sm" style="background-color: #2560a3">
            <i class="ri-medal-2-line fs-1 mb-3"></i>
            <h5 class="fw-bold">KUALITAS PELAYANAN</h5>
            <p class="mb-0">Konsistensi dan pengalaman kami menjadi jaminan pelayanan terbaik.</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="p-4 text-white rounded-4 h-100 shadow-sm" style="background-color: #2560a3">
            <i class="ri-thumb-up-line fs-1 mb-3"></i>
            <h5 class="fw-bold">LAYANAN TERINTEGRASI</h5>
            <p class="mb-0">Solusi perjalanan wisata lengkap dan menyeluruh.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Banner -->
    <div class="py-4" style="background-color: #2560a3">
      <h5 class="text-center text-white mb-0">ZapsyGo melayani lebih dari 20 destinasi wisata yang ada di Kota Batam</h5>
    </div>

    <!-- Testimoni -->
    <section class="container py-5">
      <h2 class="text-center fw-bold mb-5" style="color: #2560a3">Apa kata mereka?</h2>
      <div class="row text-center g-4">
        <div class="col-md-4">
          <div class="card h-100 border-0 shadow-sm">
            <img src="assets/client-4.jpg" class="card-img-top" alt="Lina" />
            <div class="card-body text-white rounded-bottom" style="background-color: #2560a3">
              <h6 class="fw-bold mb-1">Raul, Surabaya</h6>
              <p class="mb-0">"ZapsyGo memudahkan turis yang belum pernah ke Batam."</p>
            </div>
          </div>
        </div>
        <!-- Testimoni 2 -->
    <div class="col-md-4">
      <div class="card h-100 border-0 shadow-sm">
        <img src="assets/client-2.jpg" class="card-img-top" alt="Dimas" />
        <div class="card-body text-white rounded-bottom" style="background-color: #2560a3">
          <h6 class="fw-bold mb-1">Angelina, Medan</h6>
          <p class="mb-0">"Liburan saya di Batam jadi lebih terarah dan seru berkat itinerary dari ZapsyGo!."</p>
        </div>
      </div>
    </div>
        <!-- Testimoni 3 -->
    <div class="col-md-4">
      <div class="card h-100 border-0 shadow-sm">
        <img src="assets/client-3.jpg" class="card-img-top" alt="Maya" />
        <div class="card-body text-white rounded-bottom" style="background-color: #2560a3">
          <h6 class="fw-bold mb-1">Maya, Bandung</h6>
          <p class="mb-0">"Informasinya lengkap banget, dari hotel sampai spot hidden game!."</p>
        </div>
      </div>
    </div>
      </div>
    </section>

    <!-- Footer -->
    <footer id="contact" class="py-5" style="background-color: #2560a3; color: white">
      <div class="container">
        <div class="row gy-4">
          <div class="col-md-4">
            <div class="footer__logo mb-2">
              <a href="#" class="logo fs-4 fw-bold text-decoration-none text-white">ZapsyGo</a>
            </div>
            <p>Explore the world with ease and excitement through our travel platform.</p>
          </div>
          <div class="col-md-4">
            <h5 class="mb-3 fw-bold text-white">Akses Cepat</h5>
            <ul class="list-unstyled footer__links">
              <li><a href="index.html" class="text-decoration-none text-white">Beranda</a></li>
              <li><a href="#" class="text-decoration-none text-white">Destinasi</a></li>
              <li><a href="#" class="text-decoration-none text-white">Hotel</a></li>
              <li><a href="#" class="text-decoration-none text-white">Tentang Kami</a></li>
            </ul>
          </div>
          <div class="col-md-4">
            <h5 class="mb-3 fw-bold text-white">Kontak Kami</h5>
            <ul class="list-unstyled footer__links">
              <li><a href="#" class="text-decoration-none text-white"> <i class="ri-phone-fill me-2"></i> +62918278129</a></li>
              <li><a href="#" class="text-decoration-none text-white"> <i class="ri-record-mail-line me-2"></i> info@zapsygo</a></li>
              <li><a href="#" class="text-decoration-none text-white"> <i class="ri-map-pin-2-fill me-2"></i> Batam, Indonesia</a></li>
            </ul>
          </div>
        </div>
        <div class="text-center mt-4 footer__bar text-white small">Copyright © 2025 ZapsyGo.</div>
      </div>
    </footer>

    <script>
      // Preloader hide saat halaman selesai load
      window.addEventListener("load", function () {
        const preloader = document.getElementById("preloader");
        if (preloader) {
          preloader.style.opacity = "0";
          preloader.style.transition = "opacity 0.5s ease";
          setTimeout(() => {
            preloader.style.display = "none";
          }, 500);
        }
      });

      window.addEventListener("DOMContentLoaded", () => {
        const currentPath = window.location.pathname.split("/").pop();

        document.querySelectorAll(".nav-link").forEach((link) => {
          const linkHref = link.getAttribute("href").split("/").pop();
          if (linkHref.startsWith("#")) {
            if (window.location.hash === linkHref) {
              link.classList.add("active");
            }
          } else {
            if (currentPath === "" && linkHref === "index.html") {
              link.classList.add("active");
            } else if (currentPath === linkHref) {
              link.classList.add("active");
            }
          }
        });

        const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
        const username = localStorage.getItem("username") || "Profil";

        const loginBtn = document.getElementById("loginButton");
        const profileDropdown = document.getElementById("profileDropdown");
        const usernameDisplay = document.getElementById("usernameDisplay");

        if (isLoggedIn) {
          loginBtn?.classList.add("d-none");
          profileDropdown?.classList.remove("d-none");
          usernameDisplay.textContent = username;

     // 🔽 Tambahan: Ambil foto profil dari backend
fetch(`http://localhost:5000/api/profile?username=${username}`)
  .then(res => res.json())
  .then(data => {
    const dropdownLink = profileDropdown.querySelector("a.nav-link");
    let photoURL = data.photo;

    // ✅ Jika photoURL masih berupa path lokal atau nama file, ubah jadi URL yang bisa diakses
    if (photoURL && !photoURL.startsWith("http")) {
      photoURL = `http://localhost:5000/uploads/${photoURL.split('\\').pop().split('/').pop()}`;
    }

    if (photoURL) {
      const icon = dropdownLink.querySelector("i");
      if (icon) icon.remove();

      dropdownLink.innerHTML = `
        <img src="${photoURL}" alt="Foto" class="rounded-circle me-2" style="width: 32px; height: 32px; object-fit: cover;">
        <span>${username}</span>
      `;
    } else {
      dropdownLink.innerHTML = `
        <i class="fas fa-user-circle fs-4"></i> <span>${username}</span>
      `;
    }
  })
  .catch(err => {
    console.error("Gagal memuat foto profil:", err);
  });
        } else {
          loginBtn?.classList.remove("d-none");
          profileDropdown?.classList.add("d-none");
        }

        const logoutBtn = document.getElementById("logoutBtn");
        if (logoutBtn) {
          logoutBtn.addEventListener("click", (e) => {
            e.preventDefault();
            localStorage.removeItem("isLoggedIn");
            localStorage.removeItem("username");
            window.location.href = "login.html";
          });
        }
      });
    </script>
  </body>
</html>
